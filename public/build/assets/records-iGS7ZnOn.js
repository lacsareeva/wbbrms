function p(){const e=document.getElementById("add-dialog");e.style.display="block"}window.openAddDialog=p;function g(){document.getElementById("add-dialog").style.display="none"}window.closeWalkInRequestModal=g;function _(){document.getElementById("view-request-modal").style.display="none"}window.closeRequestModal=_;function E(){document.getElementById("response_rejected_info").style.display="none",document.getElementById("view_rejected_response").value=""}window.closeModal=E;function I(){document.getElementById("response_r_rejected_info").style.display="none",document.getElementById("view_r_rejected_response").value=""}window.closeResModal=I;function v(){document.getElementById("view-residentrequest-modal").style.display="none"}window.closeRequestResModal=v;function R(){document.getElementById("response_b_rejected_info").style.display="none",document.getElementById("view_b_rejected_response").value=""}window.closeBusModal=R;function q(){document.getElementById("view-businessrequest-modal").style.display="none"}window.closeRequestBusModal=q;function C(){document.getElementById("view-updateRequest-modal").style.display="none"}window.closeUpdateRequestModal=C;function h(){document.getElementById("view-update-BP-Request-modal").style.display="none"}window.closeUpdateBPRequestModal=h;function r(e){if(!e)return"";const t=new Date(e),n=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),d=String(t.getHours()).padStart(2,"0"),c=String(t.getMinutes()).padStart(2,"0");return`${n}-${o}-${s} ${d}:${c}`}function x(e){const t=e.requesttype||"";t==="Request for Indigency"?(document.getElementById("view-request-modal").style.display="block",document.getElementById("view_id").value=e.id||"",document.getElementById("view_fullname").textContent=e.fullname||"",document.getElementById("view_age").textContent=e.age||"",document.getElementById("view_address").textContent=e.address||"",document.getElementById("view_request_date").textContent=r(e.created_at||""),document.getElementById("view_purpose").textContent=e.purpose||"",document.getElementById("reject_button").onclick=f):t==="Request for Residency"?(document.getElementById("view-residentrequest-modal").style.display="block",document.getElementById("view_R_id").value=e.id||"",document.getElementById("view_R_fullname").textContent=e.fullname||"",document.getElementById("view_R_age").textContent=e.age||"",document.getElementById("view_R_address").textContent=e.address||"",document.getElementById("view_R_request_date").textContent=r(e.created_at||""),document.getElementById("reject_R_button").onclick=y):t==="Request for Business Permit"&&(document.getElementById("view-businessrequest-modal").style.display="block",document.getElementById("view_B_id").value=e.id||"",document.getElementById("view_B_requirement").textContent=e.requirement||"N/A",document.getElementById("view_B_fullname").textContent=e.fullname||"",document.getElementById("view_B_address").textContent=e.address||"",document.getElementById("view_B_request_date").textContent=r(e.created_at||""),document.getElementById("reject_B_button").onclick=B)}window.viewRecords=x;function f(e){e.preventDefault(),document.getElementById("response_rejected_info").style.display="block"}window.handleReject=f;function b(){Swal.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){const t=document.getElementById("view_id").value,n=document.getElementById("view_rejected_response").value;if(!t.trim()){Swal.fire("Error!","No record selected.","error");return}if(!n.trim()){Swal.fire("Error!","Please provide a response.","error");return}const o=document.getElementById("reject-form");o.action=o.action.replace(":id",t),o.submit()}})}window.rejectRequest=b;function y(e){e.preventDefault(),document.getElementById("response_r_rejected_info").style.display="block"}window.handleResReject=y;function j(){Swal.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){const t=document.getElementById("view_R_id").value,n=document.getElementById("view_r_rejected_response").value;if(!t.trim()){Swal.fire("Error!","No record selected.","error");return}if(!n.trim()){Swal.fire("Error!","Please provide a response.","error");return}const o=document.getElementById("reject-R-form");o.action=o.action.replace(":id",t),o.submit()}})}window.rejectResRequest=j;function B(e){e&&e.preventDefault(),document.getElementById("response_b_rejected_info").style.display="block"}window.handleBusReject=B;function T(){Swal.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){const t=document.getElementById("view_B_id").value,n=document.getElementById("view_b_rejected_response").value;if(!t.trim()){Swal.fire("Error!","No record selected.","error");return}if(!n.trim()){Swal.fire("Error!","Please provide a response.","error");return}const o=document.getElementById("reject-b-form");o.action=o.action.replace(":id",t),o.submit()}})}window.rejectBusRequest=T;function M(e){const t=e.requesttype||"";if(t==="Request for Indigency"){document.getElementById("view-updateRequest-modal").style.display="block",document.getElementById("update_fullname").value=e.fullname||"",document.getElementById("update_age").value=e.age||"",document.getElementById("update_address").value=e.address||"",document.getElementById("update_purpose").value=e.purpose||"";const n=document.getElementById("update-form");n&&e.id&&(n.action=`records/update/${e.id}`)}else if(t==="Request for Residency"){document.getElementById("view-updateRequest-modal").style.display="block",document.getElementById("update_fullname").value=e.fullname||"",document.getElementById("update_age").value=e.age||"",document.getElementById("update_address").value=e.address||"",document.getElementById("update_purpose").style.display="none",document.getElementById("purpose").style.display="none";const n=document.getElementById("update-form");n&&e.id&&(n.action=`records/update/${e.id}`)}else if(t==="Request for Business Permit"){document.getElementById("view-update-BP-Request-modal").style.display="block",document.getElementById("update_requirement").value=e.requirement||"",document.getElementById("update_fullnames").value=e.fullname||"",document.getElementById("update_addresss").value=e.address||"";const n=document.getElementById("update-bp-form");n&&e.id&&(n.action=`records/update/${e.id}`)}}window.editRecord=M;function S(){const t=document.getElementById("search").value.toLowerCase(),o=document.getElementById("recordTable").getElementsByTagName("tr");let s=0,d=0;for(let a=1;a<o.length;a++){const u=o[a],i=u.getElementsByTagName("td");let m=!1;if(u.id!=="noDataRow"){s++;for(let l=0;l<i.length;l++)if(i[l]&&(i[l].textContent||i[l].innerText).toLowerCase().includes(t)){m=!0;break}m?(u.style.display="",d++):u.style.display="none"}}const c=document.getElementById("noDataRow");c.style.display=d===0?"":"none";const w=document.getElementById("countValue");w.textContent=`${d} of ${s}`}window.filterTable=S;function k(){Swal.fire({title:"Process request?",text:"Are you sure you want to process this document?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){const t=document.getElementById("view_id").value;t?window.location.href=`records/IndigencyCertificate/${t}`:alert("No request ID found!")}})}window.handleAcceptRequest=k;function A(){Swal.fire({title:"Process request?",text:"Are you sure you want to process this document?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){const t=document.getElementById("view_R_id").value;t?window.location.href=`records/ResidencyCertificate/${t}`:alert("No request ID found!")}})}window.handleAcceptResRequest=A;function D(){Swal.fire({title:"Process request?",text:"Are you sure you want to process this document?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){const t=document.getElementById("view_B_id").value;t?window.location.href=`records/BussinessPermitCertificate/${t}`:Swal.fire("Error!","No request ID found. Please check again.","error")}})}window.handleAcceptBusRequest=D;function P(e){Swal.fire({title:"document pickup?",text:"",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Return",cancelButtonText:"Cancel"}).then(t=>{t.isConfirmed&&(window.location.href=`records/deletes/${e}`)})}window.confirmDelete=P;document.getElementById("fn").addEventListener("input",function(e){this.value=this.value.replace(/[^A-Za-z\s]/g,"")});document.getElementById("Rfn").addEventListener("input",function(e){this.value=this.value.replace(/[^A-Za-z\s]/g,"")});document.getElementById("Bfn").addEventListener("input",function(e){this.value=this.value.replace(/[^A-Za-z\s]/g,"")});
