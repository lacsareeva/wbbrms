function y(e=null){Swal.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes",cancelButtonText:"Cancel"}).then(a=>{var l;if(a.isConfirmed){const o=e||((l=document.getElementById("view_id"))==null?void 0:l.innerText);if(!o||o.trim()===""){Swal.fire("Error!","No record selected for deletion or the table is empty.","error");return}const n=document.getElementById("delete-form");n.addEventListener("submit",t=>{t.preventDefault()}),n.action=n.action.replace(":id",o),setTimeout(()=>{n.removeEventListener("submit",t=>{t.preventDefault()}),n.submit()},500)}})}window.submitDeleteForm=y;function p(e){function a(n){if(!n)return"";const t=new Date(n),c=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),u=String(t.getDate()).padStart(2,"0"),d=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return`${c}-${r}-${u} ${d}:${i}`}document.getElementById("update-walk-in-modal").style.display="block",document.getElementById("update_incident_report").value=e.incident_report||"",document.getElementById("update_address").value=e.address||"",document.getElementById("update_date-time").value=a(e.datetimes||""),document.getElementById("update_complainant_name").value=e.nameofcomplainant||"",document.getElementById("update_witness1").value=e.witness1||"",document.getElementById("update_witness2").value=e.witness2||"";const l=document.getElementById("update_narrative");l&&(l.value=e.narrative||""),document.getElementById("update_sender").value=e.sender||"";const o=document.getElementById("update-form");o&&(o.action=`blotter/update/${e.id}`)}window.editBlotter=p;function g(){document.getElementById("walk-in-modal").style.display="block",document.getElementById("incident-report").focus()}window.openWalkInModal=g;function f(){document.getElementById("walk-in-modal").style.display="none"}window.closeWalkInModal=f;function w(){document.getElementById("update-walk-in-modal").style.display="none"}window.closeUpdateWalkInModal=w;function I(){document.getElementById("view-walk-in-modal").style.display="none"}window.closeViewWalkInModal=I;function B(){const a=document.getElementById("search").value.toLowerCase(),o=document.getElementById("blotterTable").getElementsByTagName("tr");let n=0,t=0;for(let u=1;u<o.length;u++){const d=o[u],i=d.getElementsByTagName("td");let m=!1;if(d.id!=="noDataRow"){n++;for(let s=0;s<i.length;s++)if(i[s]&&(i[s].textContent||i[s].innerText).toLowerCase().includes(a)){m=!0;break}m?(d.style.display="",t++):d.style.display="none"}}const c=document.getElementById("noDataRow");c.style.display=t===0?"":"none";const r=document.getElementById("countValue");r.textContent=`${t} of ${n}`}window.filterTable=B;document.getElementById("complainant-name").addEventListener("input",function(e){this.value=this.value.replace(/[^A-Za-z\s]/g,"")});document.getElementById("witness1").addEventListener("input",function(e){this.value=this.value.replace(/[^A-Za-z\s]/g,"")});document.getElementById("witness2").addEventListener("input",function(e){this.value=this.value.replace(/[^A-Za-z\s]/g,"")});document.getElementById("date-time").addEventListener("input",function(e){const a=e.target.value;a.split("-")[0].length>4&&(e.target.value=a.slice(0,10))});
