function v(){const e=document.getElementById("add-dialog");e.style.display="block"}window.openAddDialog=v;function R(){document.getElementById("add-dialog").style.display="none"}window.closeWalkInRequestModal=R;function C(){document.getElementById("view-request-modal").style.display="none"}window.closeRequestModal=C;function q(){document.getElementById("response_rejected_info").style.display="none",document.getElementById("view_rejected_response").value=""}window.closeModal=q;function h(){document.getElementById("response_r_rejected_info").style.display="none",document.getElementById("view_r_rejected_response").value=""}window.closeResModal=h;function x(){document.getElementById("view-residentrequest-modal").style.display="none"}window.closeRequestResModal=x;function b(){document.getElementById("response_b_rejected_info").style.display="none",document.getElementById("view_b_rejected_response").value=""}window.closeBusModal=b;function j(){document.getElementById("view-businessrequest-modal").style.display="none"}window.closeRequestBusModal=j;function T(){document.getElementById("view-updateRequest-modal").style.display="none"}window.closeUpdateRequestModal=T;function S(){document.getElementById("view-update-BP-Request-modal").style.display="none"}window.closeUpdateBPRequestModal=S;function B(e){if(!e)return"";const t=new Date(e),n=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),u=String(t.getDate()).padStart(2,"0"),d=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0");return`${n}-${o}-${u} ${d}:${a}`}function M(e){const t=e.requesttype||"";t==="Request for Indigency"?(document.getElementById("view-request-modal").style.display="block",document.getElementById("view_id").value=e.id||"",document.getElementById("view_fullname").textContent=e.fullname||"",document.getElementById("view_age").textContent=e.age||"",document.getElementById("view_address").textContent=e.address||"",document.getElementById("view_request_date").textContent=B(e.created_at||""),document.getElementById("view_purpose").textContent=e.purpose||"",document.getElementById("reject_button").onclick=g):t==="Request for Residency"?(document.getElementById("view-residentrequest-modal").style.display="block",document.getElementById("view_R_id").value=e.id||"",document.getElementById("view_R_fullname").textContent=e.fullname||"",document.getElementById("view_R_age").textContent=e.age||"",document.getElementById("view_R_address").textContent=e.address||"",document.getElementById("view_R_request_date").textContent=B(e.created_at||""),document.getElementById("reject_R_button").onclick=E):t==="Request for Business Permit"&&(document.getElementById("view-businessrequest-modal").style.display="block",document.getElementById("view_B_id").value=e.id||"",document.getElementById("view_B_requirement").textContent=e.requirement||"N/A",document.getElementById("view_B_fullname").textContent=e.fullname||"",document.getElementById("view_B_address").textContent=e.address||"",document.getElementById("view_B_request_date").textContent=B(e.created_at||""),document.getElementById("reject_B_button").onclick=I)}window.viewRecords=M;function g(e){e.preventDefault(),document.getElementById("response_rejected_info").style.display="block"}window.handleReject=g;function D(){Swal.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){const t=document.getElementById("view_id").value,n=document.getElementById("view_rejected_response").value;if(!t.trim()){Swal.fire("Error!","No record selected.","error");return}if(!n.trim()){Swal.fire("Error!","Please provide a response.","error");return}const o=document.getElementById("reject-form");o.action=o.action.replace(":id",t),o.submit()}})}window.rejectRequest=D;function E(e){e.preventDefault(),document.getElementById("response_r_rejected_info").style.display="block"}window.handleResReject=E;function A(){Swal.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){const t=document.getElementById("view_R_id").value,n=document.getElementById("view_r_rejected_response").value;if(!t.trim()){Swal.fire("Error!","No record selected.","error");return}if(!n.trim()){Swal.fire("Error!","Please provide a response.","error");return}const o=document.getElementById("reject-R-form");o.action=o.action.replace(":id",t),o.submit()}})}window.rejectResRequest=A;function I(e){e&&e.preventDefault(),document.getElementById("response_b_rejected_info").style.display="block"}window.handleBusReject=I;function k(){Swal.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){const t=document.getElementById("view_B_id").value,n=document.getElementById("view_b_rejected_response").value;if(!t.trim()){Swal.fire("Error!","No record selected.","error");return}if(!n.trim()){Swal.fire("Error!","Please provide a response.","error");return}const o=document.getElementById("reject-b-form");o.action=o.action.replace(":id",t),o.submit()}})}window.rejectBusRequest=k;function $(e){const t=e.requesttype||"";if(t==="Request for Indigency"){document.getElementById("view-updateRequest-modal").style.display="block",document.getElementById("update_fullname").value=e.fullname||"",document.getElementById("update_age").value=e.age||"",document.getElementById("update_address").value=e.address||"",document.getElementById("update_purpose").value=e.purpose||"";const n=document.getElementById("update-form");n&&e.id&&(n.action=`records/update/${e.id}`)}else if(t==="Request for Residency"){document.getElementById("view-updateRequest-modal").style.display="block",document.getElementById("update_fullname").value=e.fullname||"",document.getElementById("update_age").value=e.age||"",document.getElementById("update_address").value=e.address||"",document.getElementById("update_purpose").style.display="none",document.getElementById("purpose").style.display="none";const n=document.getElementById("update-form");n&&e.id&&(n.action=`records/update/${e.id}`)}else if(t==="Request for Business Permit"){document.getElementById("view-update-BP-Request-modal").style.display="block",document.getElementById("update_requirement").value=e.requirement||"",document.getElementById("update_fullnames").value=e.fullname||"",document.getElementById("update_addresss").value=e.address||"";const n=document.getElementById("update-bp-form");n&&e.id&&(n.action=`records/update/${e.id}`)}}window.editRecord=$;function P(){const t=document.getElementById("search").value.toLowerCase(),o=document.getElementById("recordTable").getElementsByTagName("tr");let u=0,d=0;for(let i=1;i<o.length;i++){const s=o[i],c=s.getElementsByTagName("td");let r=!1;if(s.id!=="noDataRow"){u++;for(let l=0;l<c.length;l++)if(c[l]&&(c[l].textContent||c[l].innerText).toLowerCase().includes(t)){r=!0;break}r?(s.style.display="",d++):s.style.display="none"}}const a=document.getElementById("noDataRow");a.style.display=d===0?"":"none";const m=document.getElementById("countValue");m.textContent=`${d} of ${u}`}window.filterTable=P;function L(){Swal.fire({title:"Process request?",text:"Are you sure you want to process this document?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){const t=document.getElementById("view_id").value;t?window.location.href=`records/IndigencyCertificate/${t}`:alert("No request ID found!")}})}window.handleAcceptRequest=L;function N(){Swal.fire({title:"Process request?",text:"Are you sure you want to process this document?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){const t=document.getElementById("view_R_id").value;t?window.location.href=`records/ResidencyCertificate/${t}`:alert("No request ID found!")}})}window.handleAcceptResRequest=N;function V(){Swal.fire({title:"Process request?",text:"Are you sure you want to process this document?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){const t=document.getElementById("view_B_id").value;t?window.location.href=`records/BussinessPermitCertificate/${t}`:Swal.fire("Error!","No request ID found. Please check again.","error")}})}window.handleAcceptBusRequest=V;function Y(e){Swal.fire({title:"document pickup?",text:"",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Return",cancelButtonText:"Cancel"}).then(t=>{t.isConfirmed&&(window.location.href=`records/deletes/${e}`)})}window.confirmDelete=Y;document.getElementById("fn").addEventListener("input",function(e){this.value=this.value.replace(/[^A-Za-z\s]/g,"")});document.getElementById("Rfn").addEventListener("input",function(e){this.value=this.value.replace(/[^A-Za-z\s]/g,"")});document.getElementById("Bfn").addEventListener("input",function(e){this.value=this.value.replace(/[^A-Za-z\s]/g,"")});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("sortDoc"),t=document.getElementById("search"),o=document.getElementById("recordTable").querySelector("tbody");function u(){const d=e.value.toLowerCase(),a=t.value.toLowerCase(),m=o.querySelectorAll("tr");let i=0,s=0;m.forEach(l=>{const y=l.querySelector("td:nth-child(4)"),_=l.querySelectorAll("td");let w=!1,p=!1;if(l.id!=="noDataRow"){if(i++,_.forEach(f=>{f.textContent.toLowerCase().includes(a)&&(w=!0)}),y){const f=y.textContent.trim().toLowerCase();p=d===""||f===d}w&&p?(l.style.display="",s++):l.style.display="none"}});const c=document.getElementById("noDataRow");c&&(c.style.display=s===0?"":"none");const r=document.getElementById("countValue");r&&(r.textContent=`${s} of ${i}`)}e.addEventListener("change",u),t.addEventListener("keyup",u)});
